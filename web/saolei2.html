<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç½‘é¡µæ‰«é›·æ¸¸æˆ - part 2ğŸ¥³ | Kart Jim</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="vuepress learning repo">
    
    <link rel="preload" href="/css/assets/css/0.styles.26c95ce1.css" as="style"><link rel="preload" href="/css/assets/js/app.00ad3aaa.js" as="script"><link rel="preload" href="/css/assets/js/2.a2115c2b.js" as="script"><link rel="preload" href="/css/assets/js/17.4e0006d3.js" as="script"><link rel="prefetch" href="/css/assets/js/10.94195500.js"><link rel="prefetch" href="/css/assets/js/11.472a90cb.js"><link rel="prefetch" href="/css/assets/js/12.05d60efc.js"><link rel="prefetch" href="/css/assets/js/13.96a53f51.js"><link rel="prefetch" href="/css/assets/js/14.459a8487.js"><link rel="prefetch" href="/css/assets/js/15.beff9d7c.js"><link rel="prefetch" href="/css/assets/js/16.cdb89142.js"><link rel="prefetch" href="/css/assets/js/3.a0f1b16e.js"><link rel="prefetch" href="/css/assets/js/4.8bcc01ce.js"><link rel="prefetch" href="/css/assets/js/5.dfc4a244.js"><link rel="prefetch" href="/css/assets/js/6.916ff1f8.js"><link rel="prefetch" href="/css/assets/js/7.77f246b7.js"><link rel="prefetch" href="/css/assets/js/8.1a30ed82.js"><link rel="prefetch" href="/css/assets/js/9.9cd59bfd.js">
    <link rel="stylesheet" href="/css/assets/css/0.styles.26c95ce1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/css/" class="home-link router-link-active"><img src="/css/assets/img/icon.ico" alt="Kart Jim" class="logo"> <span class="site-name can-hide">Kart Jim</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/css/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/css/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/css/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/css/fisher/" class="nav-link">
  Fisher
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="External Menu" class="dropdown-title"><span class="title">External</span> <span class="arrow down"></span></button> <button type="button" aria-label="External Menu" class="mobile-dropdown-title"><span class="title">External</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://microsoft.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  microsoft
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://kartjim.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/css/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/css/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/css/about/" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/css/fisher/" class="nav-link">
  Fisher
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="External Menu" class="dropdown-title"><span class="title">External</span> <span class="arrow down"></span></button> <button type="button" aria-label="External Menu" class="mobile-dropdown-title"><span class="title">External</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://microsoft.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  microsoft
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://kartjim.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  css
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://v3.cn.vuejs.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ç½‘é¡µæ‰«é›·æ¸¸æˆ - part 2ğŸ¥³</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/css/web/saolei2.html#é¡¹ç›®è¿›åº¦" class="sidebar-link">é¡¹ç›®è¿›åº¦</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/web/saolei2.html#javascriptå®ç°åŸºæœ¬é€»è¾‘" class="sidebar-link">JavaScriptå®ç°åŸºæœ¬é€»è¾‘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/web/saolei2.html#åˆ†æ" class="sidebar-link">åˆ†æ</a></li><li class="sidebar-sub-header"><a href="/css/web/saolei2.html#ä»£ç å®ç°" class="sidebar-link">ä»£ç å®ç°</a></li><li class="sidebar-sub-header"><a href="/css/web/saolei2.html#æŒ‰é’®åˆ‡æ¢æ¨¡å¼" class="sidebar-link">æŒ‰é’®åˆ‡æ¢æ¨¡å¼</a></li></ul></li><li><a href="/css/web/saolei2.html#æœ€å" class="sidebar-link">æœ€å</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ç½‘é¡µæ‰«é›·æ¸¸æˆ-part-2ğŸ¥³"><a href="#ç½‘é¡µæ‰«é›·æ¸¸æˆ-part-2ğŸ¥³" class="header-anchor">#</a> ç½‘é¡µæ‰«é›·æ¸¸æˆ - part 2ğŸ¥³</h1> <p>ä¸ŠæœŸ â€”â€” <a href="/web/saolei">ç”¨çº¯JavaScriptåˆ¶ä½œæ‰«é›·æ¸¸æˆ-1</a></p> <h2 id="é¡¹ç›®è¿›åº¦"><a href="#é¡¹ç›®è¿›åº¦" class="header-anchor">#</a> é¡¹ç›®è¿›åº¦</h2> <ul><li>[x] ç¡®å®šé¡µé¢ç»“æ„</li> <li>[x] å®ç°åŸºæœ¬é¡µé¢ç»“æ„</li> <li>[x] å®ç°åŸºæœ¬é¡µé¢æ ·å¼</li> <li>[ ] JavaScriptå®ç°åŸºæœ¬é€»è¾‘</li></ul> <p>ç´§æ¥ä¸Šæ–‡ï¼Œæˆ‘ä»¬å·²ç»åšå¥½äº†é¡µé¢çš„ç»“æ„å’ŒåŸºæœ¬æ ·å¼ï¼Œè¿™ç¯‡æ–‡ç« è¿›è¡Œæ‰«é›·æ¸¸æˆçš„åŸºæœ¬JavaScriptä»£ç ã€‚</p> <h2 id="javascriptå®ç°åŸºæœ¬é€»è¾‘"><a href="#javascriptå®ç°åŸºæœ¬é€»è¾‘" class="header-anchor">#</a> JavaScriptå®ç°åŸºæœ¬é€»è¾‘</h2> <h3 id="åˆ†æ"><a href="#åˆ†æ" class="header-anchor">#</a> åˆ†æ</h3> <ol><li>ä»£ç å¤ç”¨</li></ol> <ul><li><p>ç”±äºæ‰«é›·è¿™ä¸ªæ¸¸æˆï¼Œæ˜¯ç”±ä¸‰ä¸ªæ¨¡å¼ç»„æˆï¼Œåˆ†åˆ«ä¸ºåˆçº§ã€ä¸­çº§å’Œé«˜çº§ã€‚å¦‚æœä¸€ä¸ªä¸ªå»å†™å®ƒä»¬æ¯ä¸ªçš„ä»£ç ï¼Œä¼šæ˜¾å¾—ä»£ç è‡ƒè‚¿åºå¤§è€Œä¸”æµªè´¹æ—¶é—´ã€‚</p></li> <li><p>æˆ–è€…è¯´ä½ ä¼šå†™å®ŒæŸä¸€ä¸ªå…·ä½“çš„ä»£ç é€»è¾‘ï¼Œç„¶åcopyåç¨ä½œä¿®æ”¹ï¼Ÿ
é‚£ä¸å¦‚ä½¿ç”¨JavaScript ç±»ï¼</p></li> <li><p>JavaScript ç±»çš„ä½¿ç”¨æ–¹æ³•ååˆ†ç®€å•ï¼Œæ¨èé˜…è¯»<a href="https://www.ruanyifeng.com/blog/2012/07/three_ways_to_define_a_javascript_class.html" target="_blank" rel="noopener noreferrer">é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>äº†è§£ä¸€ä¸‹JavaScriptç±»çš„åŸºæœ¬æ¦‚å¿µã€‚</p></li></ul> <ol start="2"><li>æ•°æ®å­˜å‚¨</li></ol> <ul><li>åœ¨æ‰«é›·è¿™ä¸ªæ¸¸æˆé‡Œï¼Œæ“ä½œåŒºåŸŸæ˜¯ç”±ä¸€ä¸ª n Ã— n ç»„æˆçš„ n^2^ ä¸ª æ ¼å­ï¼Œæˆ‘ä¸ªäººæ„Ÿè§‰ä½¿ç”¨tableè¡¨æ ¼æ¯”è¾ƒåˆé€‚ã€‚</li> <li>ç”¨JavaScriptæ ¹æ®å‚æ•°ç”ŸæˆDOMä»¥åŠè®¡ç®—æ ¼å­åº”æœ‰çš„æ•°æ®ï¼ˆæ˜¯å¦ä¸ºé›·æˆ–è€…åé¢çš„æ•°å­—æ˜¯å‡ ï¼‰ã€‚</li> <li>éœ€è¦ä¸€ä¸ªå¸ƒå°”å‚æ•°ä¿å­˜ æ ¼å­æ˜¯å¦è¢«æ ‡è®°</li></ul> <h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="header-anchor">#</a> ä»£ç å®ç°</h3> <p><strong>é¦–å…ˆ</strong>ï¼Œè¿˜æ˜¯è¦å…ˆåœ¨htmlæ–‡ä»¶æœ€åï¼ˆbodyæ ‡ç­¾ä¹‹å‰ï¼‰å¼•å…¥ï¼š<code>&lt;script src=&quot;game.js&quot;&gt;&lt;/script&gt;</code>
ã€‚
*[å¼•å…¥]: æ³¨æ„æ›´æ”¹ä½ è‡ªå·±çš„æ–‡ä»¶è·¯å¾„ï¼</p> <h4 id="åˆ›å»ºç±»"><a href="#åˆ›å»ºç±»" class="header-anchor">#</a> åˆ›å»ºç±»</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Mine</span><span class="token punctuation">(</span><span class="token parameter">tr<span class="token punctuation">,</span> td<span class="token punctuation">,</span> mineNum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tr <span class="token operator">=</span> tr<span class="token punctuation">;</span> <span class="token comment">// è¡Œ </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>td <span class="token operator">=</span> td<span class="token punctuation">;</span> <span class="token comment">// åˆ— </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mineNum <span class="token operator">=</span> mineNum<span class="token punctuation">;</span> <span class="token comment">// é›·çš„æ•°é‡ </span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>squares <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€æœ‰å•å…ƒæ ¼çš„DOM </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine <span class="token operator">=</span> mineNum<span class="token punctuation">;</span> <span class="token comment">// å‰©ä½™é›·çš„æ•°é‡</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// å³å‡»çš„å°çº¢æ——æ˜¯å¦å…¨ä¸ºçº¢ã€‚ï¼Œç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ¸¸æˆæˆåŠŸã€‚</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.games-area'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å®šä¹‰äº†ç±»Mineï¼Œæœ‰ä¸‰ä¸ªå‚æ•°<code>tr</code>,<code>td</code>, <code>mineNum</code>ï¼›ä¼ å…¥å„è‡ªçš„è¡Œã€åˆ—æ•°å’Œæ€»çš„é›·çš„æ•°é‡ã€‚</p> <p><code>this.squares</code>: å‚¨å­˜æ‰€æœ‰æ ¼å­çš„ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚
<code>this.parent</code>: è·å–å®¹å™¨ï¼ˆä¸»åŒºåŸŸï¼‰çš„DOM
<code>this.surplusMine</code>: å‰©ä½™çš„é›·çš„æ•°é‡ã€‚</p> <h4 id="åˆ›å»ºdomæ–¹æ³•"><a href="#åˆ›å»ºdomæ–¹æ³•" class="header-anchor">#</a> åˆ›å»ºDOMæ–¹æ³•</h4> <p>åˆ›å»ºå®Œç±»åï¼Œå°±éœ€è¦ç»™ç±»æ·»åŠ æ–¹æ³•ï¼Œé¦–å…ˆæœ€é‡è¦çš„æ˜¯è¦åˆ›å»ºè¡¨æ ¼å†…çš„DOMï¼Œå¹¶æŠŠDOMæ’å…¥é¡µé¢ä¸­ã€‚
é€šè¿‡ç±»çš„ <code>prototype</code> å¯ä»¥ç»™ç±» <code>Mine</code> æ·»åŠ æˆå‘˜æ–¹æ³•ï¼›</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">createDom</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> domTr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> domTd <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> domTd<span class="token punctuation">;</span>
            domTr<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domTd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        table<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domTr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…ç©ºï¼Œé¿å…å¤šæ¬¡åˆ›å»ºå åŠ </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨<code>createDom</code>æ–¹æ³•ä¸­ï¼Œä½¿ç”¨åŒå±‚å¾ªç¯åˆ›å»ºè¡Œ<code>tr</code>ã€åˆ—<code>td</code>çš„DOMï¼Œå¹¶æ’å…¥è¿›ä¸€ä¸ªè¡¨æ ¼<code>table</code>DOMï¼Œæœ€åæŠŠ<code>table</code>DOMæ·»åŠ åˆ°ä¸»åŒºåŸŸå†…ã€‚</p> <p>è¿™æ ·ï¼Œåªéœ€è¦å®ä¾‹åŒ–ç±»ï¼Œç„¶åè°ƒç”¨<code>createDom</code>æ–¹æ³•å³å¯ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mine</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mine<span class="token punctuation">.</span><span class="token function">createDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç»™è¡¨æ ¼è®¾å®šä¸€äº›æ ·å¼ï¼š</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* table */</span>
<span class="token selector">.games-area</span><span class="token punctuation">{</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> .4s ease-in-out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.games-area table</span><span class="token punctuation">{</span>
    <span class="token property">border-spacing</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #929294<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">table td</span><span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid<span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #fff #a1a1a1 #a1a1a1 #fff<span class="token punctuation">;</span>
    <span class="token comment">/* border: 1px solid transparent; */</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœï¼š<img src="https://img-blog.csdnimg.cn/64b841f3d99844cd99d9f7fd53c6a4d2.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTkwNDgz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°">
ä»¥ä¸Šï¼Œå®Œæ•´çš„JavaScriptä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Mine</span><span class="token punctuation">(</span><span class="token parameter">tr<span class="token punctuation">,</span> td<span class="token punctuation">,</span> mineNum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tr <span class="token operator">=</span> tr<span class="token punctuation">;</span> <span class="token comment">// è¡Œ </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>td <span class="token operator">=</span> td<span class="token punctuation">;</span> <span class="token comment">// åˆ— </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mineNum <span class="token operator">=</span> mineNum<span class="token punctuation">;</span> <span class="token comment">// é›·çš„æ•°é‡ </span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>squares <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€æœ‰å•å…ƒæ ¼çš„DOM </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine <span class="token operator">=</span> mineNum<span class="token punctuation">;</span> <span class="token comment">// å‰©ä½™é›·çš„æ•°é‡</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// å³å‡»çš„å°çº¢æ——æ˜¯å¦å…¨ä¸ºçº¢ã€‚ï¼Œç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ¸¸æˆæˆåŠŸã€‚</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.games-area'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">createDom</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> domTr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> domTd <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> domTd<span class="token punctuation">;</span>
            domTr<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domTd<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        table<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domTr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…ç©ºï¼Œé¿å…å¤šæ¬¡åˆ›å»ºå åŠ </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// æµ‹è¯•</span>
<span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mine</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mine<span class="token punctuation">.</span><span class="token function">createDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å…¥å£æ–¹æ³•"><a href="#å…¥å£æ–¹æ³•" class="header-anchor">#</a> å…¥å£æ–¹æ³•</h4> <blockquote><p>åˆ›å»ºå¥½ ç±» å’Œ åˆ›å»ºDOMçš„æ–¹æ³• åï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå…¥å£å‡½æ•°æ¥è®©ä»£ç è¿è¡Œã€‚</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ—¶ï¼Œåä¸¤è¡Œä»£ç æ›´æ”¹ä¸ºï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// æµ‹è¯•</span>
<span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mine</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mine<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="éšæœºç”Ÿæˆç±»çš„ä½ç½®"><a href="#éšæœºç”Ÿæˆç±»çš„ä½ç½®" class="header-anchor">#</a> éšæœºç”Ÿæˆç±»çš„ä½ç½®</h4> <ul><li>é›·çš„ä½ç½®éœ€è¦éšæœºç”Ÿæˆï¼Œè¿™æ—¶å°±éœ€è¦ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œè¿™äº›éšæœºæ•°ä½œä¸ºé›·çš„ä½ç½®ã€‚</li> <li>å½“ç„¶ï¼Œè¿™äº›éšæœºæ•°ä¸æ˜¯å®Œå…¨éšæ„çš„ï¼Œæˆ‘ä»¬éœ€è¦éšæœºç”Ÿæˆä¸€ä¸ªèŒƒå›´åœ¨è¡Œ(<code>this.tr</code>)å’Œåˆ—(<code>this.td</code>)èŒƒå›´ä¹‹å†…çš„æ•°ã€‚</li> <li>éšæœºæ•°ä¹Ÿæ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ã€‚</li></ul> <p>ä»£ç å¦‚ä¸‹ï¼ˆæ–¹æ³•ä¸å”¯ä¸€ï¼‰ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">randomNumber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºæ•°ç»„</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>square<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        square<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    square<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">0.5</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éšæœºæ’åº</span>
    <span class="token keyword">return</span> square<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>mineNum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿”å›å…¶ä¸­ â€˜é›·çš„ä¸ªæ•°â€™ ä¸ªã€‚</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å†™å¥½ç”Ÿæˆé›·çš„ä½ç½®ï¼ˆéšæœºæ•°ï¼‰çš„æ–¹æ³•åï¼Œå³å¯æŠŠé›·çš„ä½ç½®å†™è¿›æ•°ç»„<code>this.squares</code>ã€‚
åœ¨<code>init()</code>æ–¹æ³•å†…ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> rn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éšæœºç”Ÿæˆé›·çš„ä½ç½®ã€‚</span>

    <span class="token comment">// ä¸‹é¢å¾ªç¯ç”¨äºæŠŠé›·çš„ä½ç½®å†™å…¥ æ•°ç»„this.squaresï¼›</span>
    <span class="token comment">// æ³¨æ„ï¼šyâ€”â€”è¡Œ / xâ€”â€”åˆ—</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            n<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>rn<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'mine'</span><span class="token punctuation">,</span>x<span class="token operator">:</span>j<span class="token punctuation">,</span>y<span class="token operator">:</span>i<span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token comment">// valueé»˜è®¤ä¸º0</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'number'</span><span class="token punctuation">,</span>x<span class="token operator">:</span>j<span class="token punctuation">,</span>y<span class="token operator">:</span>i<span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>å…¶ä¸­ï¼Œé›·çš„æ•°æ®ä¸ºï¼š<code>{type:'mine',x:j,y:i}</code>ï¼›</li> <li>è€Œéé›·çš„æ•°æ®ä¸ºï¼š<code>{type:'number',x:j,y:i,value:0}</code>ï¼Œæœ‰ä¸€ä¸ªvalueå‚æ•°</li></ul> <h4 id="é˜»æ­¢å³é”®"><a href="#é˜»æ­¢å³é”®" class="header-anchor">#</a> é˜»æ­¢å³é”®</h4> <p>åœ¨æ¸¸æˆåŒºåŸŸéœ€è¦å¯¹å³é”®ç›¸åº”è¿›è¡Œå±è”½ï¼Œé¿å…å½±å“æ¸¸æˆã€‚
åœ¨ <code>init()</code> æ–¹æ³• å’Œ <code>createDom()</code> æ–¹æ³•å†…æ·»åŠ ä»¥ä¸‹ä»£ç å³å¯ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>domTd<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><h4 id="è®¡ç®—é›·å‘¨å›´çš„æ•°å­—"><a href="#è®¡ç®—é›·å‘¨å›´çš„æ•°å­—" class="header-anchor">#</a> è®¡ç®—é›·å‘¨å›´çš„æ•°å­—</h4> <p>æ¯ä¸ªé›·å‘¨å›´çš„å…«ä¸ªï¼ˆé™¤äº†è¾¹ç•Œä¸Šçš„é›·ï¼‰æ ¼å­ï¼Œå¦‚æœä¸æ˜¯é›·ï¼Œå°±éœ€è¦æŠŠé»˜è®¤æ•°å­—0åŠ ä¸Š1ï¼›ç´¯åŠ åçš„æ•°å­—å°±æ˜¯æœ€ç»ˆå‘ˆç°çš„æ•°å­—ã€‚
é¦–å…ˆï¼Œéœ€è¦å†™ä¸€ä¸ªæ–¹æ³•æ¥ç¡®å®šæ¯ä¸ªé›·çš„å‘¨å›´çš„æ•°å­—æ ¼å­çš„åæ ‡ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// getAroundæ–¹æ³•ç¡®å®šå‘¨å›´éœ€è¦åŠ æ•°å­—çš„åæ ‡ã€‚</span>
<span class="token comment">// valueé»˜è®¤ä¸º0ï¼Œé›·çš„å‘¨å›´ï¼ˆæœ€å¤šå…«ä¸ªï¼‰æ•°å­—åŠ 1ï¼Œç´¯åŠ èµ·æ¥å³ä¸ºvalueçš„å€¼ã€‚</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getAround</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">square</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> square<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> square<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token comment">/*
    x-1,y-1     x,y-1   x+1,y-1
    x-1,y       (x,y)    x+1,y
    x-1,y+1     x,y+1   x+1,y+1
    */</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>
                i<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span>
                j<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span>
                i<span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span>
                j<span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span>
                <span class="token punctuation">(</span>i<span class="token operator">==</span>x<span class="token operator">&amp;&amp;</span>j<span class="token operator">==</span>y<span class="token punctuation">)</span> <span class="token operator">||</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'mine'</span>
            <span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>j<span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// not [j][i]!</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// è¿”å›é›·å‘¨å›´çš„æ•°å­—æ ¼å­çš„åæ ‡</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ¥ç€ï¼Œéœ€è¦å†™ä¸ªæ–¹æ³•ï¼Œè¿›è¡Œæ•°å­—æ ¼å­çš„valueå€¼çš„æ›´æ–°ï¼Œå³è®¡ç®—é›·å‘¨å›´çš„æ•°å­—ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// æ›´æ–°value â€”â€” éœ€è¦ç›‘æ§é¼ æ ‡ç‚¹å‡»æ•ˆæœä¹‹åæ‰å»æ›´æ–°æ•°æ®ï¼ˆé˜²æ­¢ç”¨æˆ·åœ¨æ§åˆ¶å°æå‰çœ‹å‡ºï¼ï¼‰ï¼Œæ‰€ä»¥è¦å•ç‹¬å†™ä¸ªç±»çš„æ–¹æ³•ã€‚</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">updateNumber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAround</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>item<span class="token operator">&lt;</span>loc<span class="token punctuation">.</span>length<span class="token punctuation">;</span>item<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> locx <span class="token operator">=</span> loc<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">let</span> locy <span class="token operator">=</span> loc<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>locx<span class="token punctuation">]</span><span class="token punctuation">[</span>locy<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¹‹åï¼Œåœ¨<code>init()</code>æ–¹æ³•å†…è°ƒç”¨updateNumberæ–¹æ³•:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="play"><a href="#play" class="header-anchor">#</a> play</h4> <p><code>play</code>æ–¹æ³•ï¼Œå³ç›‘æ§é¼ æ ‡äº‹ä»¶ï¼Œä¸ç”¨æˆ·äº¤äº’ï¼Œå®ç°æ¸¸æˆã€‚</p> <ul><li>ç›‘æ§é¼ æ ‡å·¦é”® â€”â€” event.which == 1
<ul><li>é¼ æ ‡ç‚¹å‡»æ—¶ï¼ŒæŠŠæ•°å­—æ˜¾ç¤º</li> <li>é‡åˆ°0ï¼ŒæŠŠå‘¨å›´çš„0éƒ½æ˜¾ç¤ºå‡º æ¥â€”â€” é€’å½’è°ƒç”¨</li> <li>ç‚¹å‡»åæ ·å¼å˜åŒ–ï¼›æ•°å­—ä¸ä¸€æ ·ï¼Œæ ·å¼ä¹Ÿä¸ä¸€æ ·ï¼›æ‰€ä»¥éœ€è¦æ›´æ–°`gane.css```ï¼š</li></ul></li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.mine</span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #ccc <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>img/mine.png<span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.flag</span><span class="token punctuation">{</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #ccc <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>img/flag.png<span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">td.zero</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.one</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #0332fe<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.two</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #019f02<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.three</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ff2600<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.four</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #93208f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.five</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ff7f29<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.six</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ff3fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.seven</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #3fffbf<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">td.eight</span><span class="token punctuation">{</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> #d9d9d9<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #22ee0f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>ç›‘æ§é¼ æ ‡å³é”® â€”â€” event.which == 3
<ul><li>æ ‡è®°é›·çš„ä½ç½®</li></ul></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ç‚¹å‡» å¼€å§‹æ¸¸æˆã€‚</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span>obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> This <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>which <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>className <span class="token operator">!=</span> <span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//å·¦é”®</span>
        <span class="token keyword">let</span> curSquare <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> colorName <span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">,</span><span class="token string">'one'</span><span class="token punctuation">,</span><span class="token string">'two'</span><span class="token punctuation">,</span><span class="token string">'three'</span><span class="token punctuation">,</span><span class="token string">'four'</span><span class="token punctuation">,</span><span class="token string">'five'</span><span class="token punctuation">,</span><span class="token string">'six'</span><span class="token punctuation">,</span><span class="token string">'seven'</span><span class="token punctuation">,</span><span class="token string">'eight'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>curSquare<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> curSquare<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            obj<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>colorName<span class="token punctuation">[</span>curSquare<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// !!! </span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>curSquare<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// ç‚¹åˆ°0ï¼ˆ0ä¸æ˜¾ç¤ºï¼‰ï¼Œå‘¨å›´çš„0éƒ½ä¼šå‡ºç°</span>
                obj<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                <span class="token keyword">function</span> <span class="token function">getAllZero</span><span class="token punctuation">(</span><span class="token parameter">sq</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> aroundZero <span class="token operator">=</span> This<span class="token punctuation">.</span><span class="token function">getAround</span><span class="token punctuation">(</span>sq<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>aroundZero<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">let</span> x <span class="token operator">=</span> aroundZero<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                        <span class="token keyword">let</span> y <span class="token operator">=</span> aroundZero<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                        This<span class="token punctuation">.</span>tds<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>colorName<span class="token punctuation">[</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// é€’å½’</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>check<span class="token punctuation">)</span><span class="token punctuation">{</span>
                                This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>check <span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// !!! </span>
                                <span class="token function">getAllZero</span><span class="token punctuation">(</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                            This<span class="token punctuation">.</span>tds<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>

                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span>
                <span class="token function">getAllZero</span><span class="token punctuation">(</span>curSquare<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">// console.log('ä½ ç‚¹åˆ°é›·äº†!');</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gameOver</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>which <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// å³é”®</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>className <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>className <span class="token operator">!=</span> <span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        obj<span class="token punctuation">.</span>className <span class="token operator">=</span>obj<span class="token punctuation">.</span>className<span class="token operator">==</span><span class="token string">'flag'</span><span class="token operator">?</span><span class="token string">''</span><span class="token operator">:</span><span class="token string">'flag'</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'mine'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>className <span class="token operator">==</span> <span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token operator">--</span><span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æ¸¸æˆé€šè¿‡ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æ¸¸æˆå¤±è´¥!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å…¶ä¸­gameOveræ–¹æ³•ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">gameOver</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">clickTd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// æ˜¾ç¤ºæ‰€æœ‰çš„é›·ï¼› å–æ¶ˆç‚¹å‡»äº‹ä»¶ï¼›</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'mine'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'mine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>onmousedown <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// æ ‡çº¢</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>clickTd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        clickTd<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨åˆ›å»ºDOMçš„æ—¶å€™ï¼Œè°ƒç”¨<code>play</code>æ–¹æ³•ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> This <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token comment">// å¾ªç¯å†…æ·»åŠ ï¼š</span>
domTd<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æŠŠæ ¼å­å¯¹åº”çš„ è¡Œä¸åˆ— å­˜åˆ°æ ¼å­èº«ä¸Šã€‚</span>
<span class="token comment">// ç‚¹å‡»äº‹ä»¶ </span>
domTd<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    This<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸¤ä¸ªthisæŒ‡ä»£ä¸åŒï¼</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="å‰©ä½™é›·æ•°"><a href="#å‰©ä½™é›·æ•°" class="header-anchor">#</a> å‰©ä½™é›·æ•°</h4> <p>å°†å‰©ä½™çš„é›·æ•°ï¼Œå®æ—¶æ˜¾ç¤ºåœ¨é¡µè„šã€‚
initæ–¹æ³•å†…åŠ å…¥ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'MineNum'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine<span class="token punctuation">;</span>
</code></pre></div><p>åˆ°è¿™ï¼Œæ¸¸æˆå¤§è‡´å®Œæˆï¼Œæ‰“å¼€æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœï¼š
<img src="https://img-blog.csdnimg.cn/96825a8096ab40999404eb754d63da70.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2NTkwNDgz,size_16,color_FFFFFF,t_70#pic_center" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> <h3 id="æŒ‰é’®åˆ‡æ¢æ¨¡å¼"><a href="#æŒ‰é’®åˆ‡æ¢æ¨¡å¼" class="header-anchor">#</a> æŒ‰é’®åˆ‡æ¢æ¨¡å¼</h3> <ul><li>æ‰«é›·æ¸¸æˆæœ‰ä¸‰ä¸ªæ¨¡å¼ï¼Œé€šè¿‡ä¸Šæ–¹æŒ‰é’®å®ç°æ¨¡å¼åˆ‡æ¢;</li></ul> <p>æŠŠä¹‹å‰çš„æµ‹è¯•ä»£ç :</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mine</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mine<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ›¿æ¢ä¸ºï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.btn-area button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ln <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// ç‚¹å‡»è§¦å‘äº‹ä»¶ï¼Œåˆ‡æ¢æ¨¡å¼</span>
        btns<span class="token punctuation">[</span>ln<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'active'</span><span class="token punctuation">;</span>
        mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mine</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mine<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¥å£ </span>
        ln <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">onclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹æ¨¡å¼</span>
btns<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// é‡æ–°å¼€å§‹äº‹ä»¶</span>
    mine<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é‡æ–°åˆå§‹åŒ– </span>
<span class="token punctuation">}</span>
</code></pre></div><p>å³å¯å®ç°é€šè¿‡æŒ‰é’®æ¨¡å¼åˆ‡æ¢ä»¥åŠé‡æ–°å¼€å§‹æ¸¸æˆã€‚</p> <h2 id="æœ€å"><a href="#æœ€å" class="header-anchor">#</a> æœ€å</h2> <ul><li>[x] ç¡®å®šé¡µé¢ç»“æ„</li> <li>[x] å®ç°åŸºæœ¬é¡µé¢ç»“æ„</li> <li>[x] å®ç°åŸºæœ¬é¡µé¢æ ·å¼</li> <li>[x] JavaScriptå®ç°åŸºæœ¬é€»è¾‘</li></ul> <p>é™„ä¸Š å®Œæ•´ JavaScript ä»£ç ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Mine</span><span class="token punctuation">(</span><span class="token parameter">tr<span class="token punctuation">,</span> td<span class="token punctuation">,</span> mineNum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tr <span class="token operator">=</span> tr<span class="token punctuation">;</span> <span class="token comment">// è¡Œ </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>td <span class="token operator">=</span> td<span class="token punctuation">;</span> <span class="token comment">// åˆ— </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mineNum <span class="token operator">=</span> mineNum<span class="token punctuation">;</span> <span class="token comment">// é›·çš„æ•°é‡ </span>

    <span class="token comment">// æ‰€æœ‰æ–¹å—çš„ä¿¡æ¯ï¼ŒäºŒç»´æ•°ç»„ã€‚</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>squares <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>tds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æ‰€æœ‰å•å…ƒæ ¼çš„DOM </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine <span class="token operator">=</span> mineNum<span class="token punctuation">;</span> <span class="token comment">// å‰©ä½™é›·çš„æ•°é‡</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// å³å‡»çš„å°çº¢æ——æ˜¯å¦å…¨ä¸ºçº¢ã€‚ï¼Œç”¨æ¥åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ¸¸æˆæˆåŠŸã€‚</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>parent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.games-area'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// çˆ¶DOM </span>
<span class="token punctuation">}</span>

<span class="token comment">// Mineä¸Šçš„åˆ›å»ºDOMçš„æ–¹æ³•ï¼š</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">createDom</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> This <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> table <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> domTr <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'tr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">const</span> domTd <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            domTd<span class="token punctuation">.</span>pos <span class="token operator">=</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// æŠŠæ ¼å­å¯¹åº”çš„ è¡Œä¸åˆ— å­˜åˆ°æ ¼å­èº«ä¸Šã€‚</span>
            <span class="token comment">// ç‚¹å‡»äº‹ä»¶ </span>
            domTd<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                This<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸¤ä¸ªthisæŒ‡ä»£ä¸åŒï¼</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> domTd<span class="token punctuation">;</span>
            <span class="token comment">// é˜»æ­¢å³é”®</span>
            domTd<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
            domTr<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domTd<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        table<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>domTr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…ç©ºï¼Œé¿å…å¤šæ¬¡åˆ›å»ºå åŠ </span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">randomNumber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ç©ºæ•°ç»„</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>square<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        square<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    square<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token number">0.5</span><span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éšæœºæ’åº</span>
    
    <span class="token keyword">return</span> square<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>mineNum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é€‰å–å…¶ä¸­ â€˜é›·çš„ä¸ªæ•°â€™ ä¸ªã€‚</span>
<span class="token punctuation">}</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> rn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">randomNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// éšæœºç”Ÿæˆé›·çš„ä½ç½®ã€‚</span>

    <span class="token comment">// ä¸‹é¢å¾ªç¯ç”¨äºæŠŠé›·çš„ä½ç½®å†™å…¥ æ•°ç»„this.squaresï¼›</span>
    <span class="token comment">// y/xçš„åæ ‡ ä¸ è¡Œ/åˆ—æ•° å¯¹åº”ã€‚</span>
    <span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            n<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>rn<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'mine'</span><span class="token punctuation">,</span>x<span class="token operator">:</span>j<span class="token punctuation">,</span>y<span class="token operator">:</span>i<span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token comment">// valueé»˜è®¤ä¸º0</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'number'</span><span class="token punctuation">,</span>x<span class="token operator">:</span>j<span class="token punctuation">,</span>y<span class="token operator">:</span>i<span class="token punctuation">,</span>value<span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span> 
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// é˜»æ­¢å³é”®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span><span class="token function-variable function">oncontextmenu</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å‰©ä½™é›·æ•°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'MineNum'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// getAroundæ–¹æ³•ç¡®å®šå‘¨å›´éœ€è¦åŠ æ•°å­—çš„åæ ‡ã€‚</span>
<span class="token comment">// valueé»˜è®¤ä¸º0ï¼Œé›·çš„å‘¨å›´ï¼ˆæœ€å¤šå…«ä¸ªï¼‰æ•°å­—åŠ 1ï¼Œç´¯åŠ èµ·æ¥å³ä¸ºvalueçš„å€¼ã€‚</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getAround</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">square</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> square<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token keyword">let</span> y <span class="token operator">=</span> square<span class="token punctuation">.</span>y<span class="token punctuation">;</span>
    <span class="token comment">/*
    x-1,y-1     x,y-1   x+1,y-1
    x-1,y       (x,y)    x+1,y
    x-1,y+1     x,y+1   x+1,y+1
    */</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span>x<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>x<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span>y<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span>y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>
                i<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span>
                j<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span>
                i<span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span>
                j<span class="token operator">&gt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span>
                <span class="token punctuation">(</span>i<span class="token operator">==</span>x<span class="token operator">&amp;&amp;</span>j<span class="token operator">==</span>y<span class="token punctuation">)</span> <span class="token operator">||</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'mine'</span>
            <span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>j<span class="token punctuation">,</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// not [j][i]!</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ›´æ–°value â€”â€” éœ€è¦ç›‘æ§é¼ æ ‡ç‚¹å‡»æ•ˆæœä¹‹åæ‰å»æ›´æ–°æ•°æ®ï¼ˆé˜²æ­¢ç”¨æˆ·åœ¨æ§åˆ¶å°æå‰çœ‹å‡ºï¼ï¼‰ï¼Œæ‰€ä»¥è¦å•ç‹¬å†™ä¸ªç±»çš„æ–¹æ³•ã€‚</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">updateNumber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">let</span> loc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAround</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> item<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>item<span class="token operator">&lt;</span>loc<span class="token punctuation">.</span>length<span class="token punctuation">;</span>item<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">let</span> locx <span class="token operator">=</span> loc<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">let</span> locy <span class="token operator">=</span> loc<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>locx<span class="token punctuation">]</span><span class="token punctuation">[</span>locy<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// ç‚¹å‡» å¼€å§‹æ¸¸æˆã€‚</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">play</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span>obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> This <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>which <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>className <span class="token operator">!=</span> <span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//å·¦é”®</span>
        <span class="token keyword">let</span> curSquare <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> colorName <span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">,</span><span class="token string">'one'</span><span class="token punctuation">,</span><span class="token string">'two'</span><span class="token punctuation">,</span><span class="token string">'three'</span><span class="token punctuation">,</span><span class="token string">'four'</span><span class="token punctuation">,</span><span class="token string">'five'</span><span class="token punctuation">,</span><span class="token string">'six'</span><span class="token punctuation">,</span><span class="token string">'seven'</span><span class="token punctuation">,</span><span class="token string">'eight'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>curSquare<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            obj<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> curSquare<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            obj<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>colorName<span class="token punctuation">[</span>curSquare<span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// !!! </span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>curSquare<span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">// ç‚¹åˆ°0ï¼ˆ0ä¸æ˜¾ç¤ºï¼‰ï¼Œå‘¨å›´çš„0éƒ½ä¼šå‡ºç°</span>
                obj<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                <span class="token keyword">function</span> <span class="token function">getAllZero</span><span class="token punctuation">(</span><span class="token parameter">sq</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">var</span> aroundZero <span class="token operator">=</span> This<span class="token punctuation">.</span><span class="token function">getAround</span><span class="token punctuation">(</span>sq<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>aroundZero<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">let</span> x <span class="token operator">=</span> aroundZero<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                        <span class="token keyword">let</span> y <span class="token operator">=</span> aroundZero<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                        This<span class="token punctuation">.</span>tds<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>colorName<span class="token punctuation">[</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// é€’å½’</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>check<span class="token punctuation">)</span><span class="token punctuation">{</span>
                                This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>check <span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// !!! </span>
                                <span class="token function">getAllZero</span><span class="token punctuation">(</span>This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                            This<span class="token punctuation">.</span>tds<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> This<span class="token punctuation">.</span>squares<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>

                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span>
                <span class="token function">getAllZero</span><span class="token punctuation">(</span>curSquare<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">// console.log('ä½ ç‚¹åˆ°é›·äº†!');</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gameOver</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>which <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// å³é”®</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>className <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>className <span class="token operator">!=</span> <span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        obj<span class="token punctuation">.</span>className <span class="token operator">=</span>obj<span class="token punctuation">.</span>className<span class="token operator">==</span><span class="token string">'flag'</span><span class="token operator">?</span><span class="token string">''</span><span class="token operator">:</span><span class="token string">'flag'</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>obj<span class="token punctuation">.</span>pos<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'mine'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>className <span class="token operator">==</span> <span class="token string">'flag'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token operator">--</span><span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>mineNumDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>surplusMine <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>allRight <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æ¸¸æˆé€šè¿‡ï¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æ¸¸æˆå¤±è´¥!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gameOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Mine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">gameOver</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">clickTd</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// æ˜¾ç¤ºæ‰€æœ‰çš„é›·ï¼›å–æ¶ˆç‚¹å‡»äº‹ä»¶ï¼›æ ‡çº¢</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>tr<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token keyword">this</span><span class="token punctuation">.</span>td<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>squares<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">'mine'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'mine'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tds<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>onmousedown <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>clickTd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        clickTd<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token punctuation">}</span>
<span class="token keyword">const</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.btn-area button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> mine <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ln <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">28</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// ç‚¹å‡»è§¦å‘äº‹ä»¶ï¼Œåˆ‡æ¢æ¨¡å¼</span>
        btns<span class="token punctuation">[</span>ln<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'active'</span><span class="token punctuation">;</span>
        mine <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mine</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mine<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// å…¥å£ </span>
        ln <span class="token operator">=</span> i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">onclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// åˆå§‹æ¨¡å¼</span>
btns<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// é‡æ–°å¼€å§‹äº‹ä»¶</span>
    mine<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// é‡æ–°åˆå§‹åŒ– </span>
<span class="token punctuation">}</span>

</code></pre></div><ul><li>å‚è€ƒè§†é¢‘â€”â€” <a href="https://ke.qq.com/course/277224?_bid=167&amp;_wv=2147487745&amp;term_id=100327973&amp;taid=3628555875662568&amp;from=Mobile_qqchat#from=androidapp" target="_blank" rel="noopener noreferrer">è…¾è®¯è¯¾å ‚<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">8/26/2021, 4:39:21 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/css/web/saolei.html" class="prev">
        ç½‘é¡µæ‰«é›·æ¸¸æˆ - part 1ğŸ¥³
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/css/assets/js/app.00ad3aaa.js" defer></script><script src="/css/assets/js/2.a2115c2b.js" defer></script><script src="/css/assets/js/17.4e0006d3.js" defer></script>
  </body>
</html>
